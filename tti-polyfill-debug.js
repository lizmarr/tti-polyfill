(function(){var d="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,g="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,e){a!=Array.prototype&&a!=Object.prototype&&(a[b]=e.value)};function l(){l=function(){};d.Symbol||(d.Symbol=m)}var n=0;function m(a){return"jscomp_symbol_"+(a||"")+n++}
function p(){l();var a=d.Symbol.iterator;a||(a=d.Symbol.iterator=d.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&g(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return q(this)}});p=function(){}}function q(a){var b=0;return r(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function r(a){p();a={next:a};a[d.Symbol.iterator]=function(){return this};return a}function t(a){p();var b=a[Symbol.iterator];return b?b.call(a):q(a)}
function u(a){if(!(a instanceof Array)){a=t(a);for(var b,e=[];!(b=a.next()).done;)e.push(b.value);a=e}return a}var v=0;function w(a,b){var e=fetch;fetch=function(c){for(var k=[],f=0;f<arguments.length;++f)k[f-0]=arguments[f];return new Promise(function(c,f){var h=v++;a(h);e.apply(null,[].concat(u(k))).then(function(a){b(h);c(a)},function(a){b(a);f(a)})})}}function x(a){for(var b=[],e=0;e<arguments.length;++e)b[e-0]=arguments[e];console.log.apply(console,[].concat(u(b)))}
function y(a,b){if(2<a.length)return performance.now();var e=[];b=t(b);for(var c=b.next();!c.done;c=b.next())c=c.value,e.push({timestamp:c.start,type:"requestStart"}),e.push({timestamp:c.end,type:"requestEnd"});b=t(a);for(c=b.next();!c.done;c=b.next())e.push({timestamp:c.value,type:"requestStart"});e.sort(function(a,b){return a.timestamp-b.timestamp});a=a.length;for(b=e.length-1;0<=b;b--)switch(c=e[b],c.type){case "requestStart":a--;break;case "requestEnd":a++;if(2<a)return c.timestamp;break;default:throw Error("Internal Error: This should never happen");
}return 0}function z(a){a=a?a:{};this.i=a.minValue||null;this.j=[];this.a=new Map;this.f=null;this.c=-Infinity;this.b=!1;this.g=null;w(this.s.bind(this),this.l.bind(this))}z.prototype.getFirstConsistentlyInteractive=function(){var a=this;return new Promise(function(b){a.g=b;"complete"==document.readyState?A(a):window.addEventListener("load",function(){A(a)})})};function A(a){x("Enabling FirstConsistentlyInteractiveDetector");a.b=!0;B(a,0)}
function B(a,b){a.b?(x("Attempting to reschedule FirstConsistentlyInteractive check to "+b),x("Previous timer activation time: "+a.c),a.c>b?x("Current activation time is greater than attempted reschedule time. No need to postpone."):(clearTimeout(a.f),a.f=setTimeout(function(){x("Checking if First Consistently Interactive was reached...");var b=performance.timing.navigationStart,c=y(a.h,a.j),k=(window.a&&window.a.m?1E3*window.a.m().u-b:0)||performance.timing.domContentLoadedEventEnd-b;if(a.i)var f=
a.i;else performance.timing.domContentLoadedEventEnd?(f=performance.timing,f=f.domContentLoadedEventEnd-f.navigationStart):f=null;var h=performance.now();null===f&&(x("No usable minimum value yet. Postponing check."),B(a,Math.max(c+5E3,h+1E3)));x("Parameter values:");x("NavigationStart",b);x("lastKnownNetwork2Busy",c);x("Search Start",k);x("Min Value",f);x("Last busy",c);x("Current time",h);x("Incomplete JS Request Start Times",a.h);x("Network requests",a.j);b=[];5E3>h-c?c=null:(c=b.length?b[b.length-
1].end:k,c=5E3>h-c?null:Math.max(c,f));c&&(a.g(c),x("Disabling FirstConsistentlyInteractiveDetector"),clearTimeout(a.f),a.b=!1);x("Could not detect First Consistently Interactive. Retrying in 1 second.");B(a,performance.now()+1E3)},b-performance.now()),a.c=b,x("Rescheduled firstConsistentlyInteractive check at "+b))):x("startSchedulingTimerTasks must be called before calling rescheduleTimer")}
z.prototype.s=function(a){x("Starting JS initiated request. Request ID: "+a);this.a.set(a,performance.now());x("Active XHRs: "+this.a.size)};z.prototype.l=function(a){x("Completed JS initiated request with request ID: "+a);this.a.delete(a);x("Active XHRs: "+this.a.size)};d.Object.defineProperties(z.prototype,{h:{configurable:!0,enumerable:!0,get:function(){return[].concat(u(this.a.values()))}}});
var C={getFirstConsistentlyInteractive:function(a){a=a?a:{};return"PerformanceLongTaskTiming"in window?(new z(a)).getFirstConsistentlyInteractive():Promise.resolve(null)}};"undefined"!=typeof module&&module.exports?module.exports=C:"function"===typeof define&&define.amd?define("ttiPolyfill",[],function(){return C}):window.ttiPolyfill=C;})();
//# sourceMappingURL=tti-polyfill-debug.js.map